import{j as e,b as h,r as u}from"./index-DNb6WZ_m.js";import{u as p}from"./useQuery-YEbScmEl.js";import{a as b}from"./api-BZS8NOXb.js";const j=({post:s,onClick:t})=>{const n=s.content.length>150?s.content.substring(0,150)+"...":s.content,r=new Date(s.createdAt).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"});return e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden cursor-pointer transform transition-all duration-300 hover:scale-105 hover:shadow-lg opacity-0 animate-fade-in",onClick:t,children:[e.jsx("img",{src:s.image||"/placeholder-image.jpg",alt:s.title,className:"w-full h-48 object-cover"}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:s.title}),e.jsx("p",{className:"text-gray-600 mb-2",children:n}),e.jsx("p",{className:"text-sm text-gray-500",children:r})]})]})},v=()=>{const s=h(),[t,n]=u.useState(1),r=9,{data:o,isLoading:d,error:x}=p({queryKey:["blog-posts"],queryFn:async()=>(await b.get("/blog-posts")).data}),i=o?.filter(a=>a.published)||[],l=Math.ceil(i.length/r),c=(t-1)*r,m=i.slice(c,c+r),g=a=>{s(`/blog/${a}`)};return d?e.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:e.jsx("div",{className:"text-xl",children:"Cargando artículos..."})}):x?e.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:e.jsx("div",{className:"text-xl text-red-500",children:"Error al cargar los artículos."})}):e.jsx("div",{className:"min-h-screen bg-gray-100 opacity-0 animate-fade-in",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-center mb-8",children:"Blog"}),i.length===0?e.jsx("div",{className:"text-center text-lg text-gray-600",children:"No hay artículos publicados aún."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:m.map(a=>e.jsx(j,{post:a,onClick:()=>g(a.id)},a.id))}),l>1&&e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsx("button",{onClick:()=>n(t-1),disabled:t===1,className:"px-4 py-2 bg-blue-500 text-white rounded disabled:opacity-50",children:"Anterior"}),e.jsxs("span",{className:"px-4 py-2",children:["Página ",t," de ",l]}),e.jsx("button",{onClick:()=>n(t+1),disabled:t===l,className:"px-4 py-2 bg-blue-500 text-white rounded disabled:opacity-50",children:"Siguiente"})]})]})]})})};export{v as default};
