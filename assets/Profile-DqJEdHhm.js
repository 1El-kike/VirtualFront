import{r,c as w,R as N,j as e,aH as p}from"./index-BvNjMpKb.js";import{u as v}from"./index.esm-BoFuB33D.js";import{u as k}from"./useQuery-D9BhImmb.js";import{u as P}from"./useMutation-Ct6irlJG.js";import{a as f}from"./api-BZS8NOXb.js";import{m as l}from"./proxy-BX4A2y1n.js";import"./gestures-D9pV5T-g.js";function C({title:o,titleId:i,...a},d){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":i},a),o?r.createElement("title",{id:i},o):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const E=r.forwardRef(C);function M({title:o,titleId:i,...a},d){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":i},a),o?r.createElement("title",{id:i},o):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const A=r.forwardRef(M);function R({title:o,titleId:i,...a},d){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":i},a),o?r.createElement("title",{id:i},o):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const F=r.forwardRef(R),H=()=>{const{user:o,login:i}=w(),[a,d]=r.useState(!1),[x,b]=r.useState(!1),{register:t,handleSubmit:h,formState:{errors:c},reset:u,watch:g}=v(),{data:s,isLoading:y}=k({queryKey:["profile"],queryFn:async()=>(await f.get("/auth/profile")).data}),m=P({mutationFn:async n=>(await f.put("/auth/profile",n)).data,onSuccess:n=>{n.token&&i(n.token),d(!1),b(!1),u()}});N.useEffect(()=>{s&&u({email:s.email,nombre:s.nombre,nombreMadre:s.nombreMadre,nombrePadre:s.nombrePadre,ci:s.ci,telefonoMovil:s.telefonoMovil,telefonoFijo:s.telefonoFijo,direccionCI:s.direccionCI,direccionActual:s.direccionActual,cuentaTarjetaPago:s.cuentaTarjetaPago})},[s,u]);const j=n=>{m.mutate(n)};return y?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-500 via-violet-500 to-teal-500 py-8 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-white shadow-2xl rounded-2xl overflow-hidden",children:[e.jsxs("div",{className:"relative bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-700 px-6 py-12 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-teal-400 bg-opacity-10"}),e.jsx("div",{className:"absolute -top-4 -right-4 w-32 h-32 bg-rose-200 bg-opacity-10 rounded-full"}),e.jsx("div",{className:"absolute -bottom-4 -left-4 w-24 h-24 bg-violet-200 bg-opacity-10 rounded-full"}),e.jsxs("div",{className:"relative flex flex-col md:flex-row items-center space-y-4 md:space-y-0 md:space-x-6",children:[e.jsx("div",{className:"bg-white bg-opacity-20 backdrop-blur-sm rounded-full p-6 shadow-2xl",children:e.jsx(p,{className:"w-20 h-20 text-blue-700"})}),e.jsxs("div",{className:"text-center md:text-left",children:[e.jsx("h1",{className:"text-4xl font-bold text-blue-900 mb-2",children:"Mi Perfil"}),e.jsx("p",{className:"text-blue-100 text-lg",children:"Gestiona tu informaci√≥n personal y preferencias"}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-4 text-sm",children:[e.jsx("div",{className:"bg-white bg-opacity-20 backdrop-blur-sm rounded-full px-4 py-2",children:e.jsx("span",{className:"text-blue-950 font-medium",children:s?.role==="admin"?"üëë Administrador":"üë§ Usuario"})}),e.jsx("div",{className:"bg-white bg-opacity-20 backdrop-blur-sm rounded-full px-4 py-2",children:e.jsxs("span",{className:"text-blue-950",children:["üìÖ Miembro desde ",s?.createdAt?new Date(s.createdAt).getFullYear():"N/A"]})})]})]})]})]}),e.jsxs("div",{className:"px-6 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-100 text-sm font-medium",children:"Estado de Cuenta"}),e.jsx("p",{className:"text-2xl font-bold",children:"Activa"})]}),e.jsx("div",{className:"bg-white bg-opacity-20 rounded-full p-3",children:e.jsx(p,{className:"w-8 h-8"})})]})}),e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-gradient-to-r from-green-500 to-green-600 rounded-xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-100 text-sm font-medium",children:"Propiedades"}),e.jsx("p",{className:"text-2xl font-bold",children:"0"})]}),e.jsx("div",{className:"bg-white bg-opacity-20 rounded-full p-3",children:e.jsx("svg",{className:"w-8 h-8",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm3 2a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z",clipRule:"evenodd"})})})]})}),e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-gradient-to-r from-purple-500 to-purple-600 rounded-xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-100 text-sm font-medium",children:"Posts del Blog"}),e.jsx("p",{className:"text-2xl font-bold",children:"0"})]}),e.jsx("div",{className:"bg-white bg-opacity-20 rounded-full p-3",children:e.jsx("svg",{className:"w-8 h-8",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z",clipRule:"evenodd"})})})]})})]}),e.jsxs("form",{onSubmit:h(j),className:"space-y-6",children:[e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Informaci√≥n Personal"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Actualiza tus datos personales y de contacto"})]}),!a&&e.jsxs("button",{type:"button",onClick:()=>d(!0),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-all duration-200 shadow-md hover:shadow-lg",children:[e.jsx(A,{className:"w-5 h-5"}),e.jsx("span",{children:"Editar Perfil"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),a?e.jsx("input",{type:"email",...t("email",{required:"Email es requerido",pattern:{value:/^\S+@\S+$/i,message:"Email inv√°lido"}}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}):e.jsx("p",{className:"text-gray-900 bg-white px-3 py-2 rounded-md border",children:s?.email||o?.email}),c.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.email.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre Completo"}),a?e.jsx("input",{type:"text",...t("nombre"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}):e.jsx("p",{className:"text-gray-900 bg-white px-3 py-2 rounded-md border",children:s?.nombre||"No especificado"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre de la Madre"}),a?e.jsx("input",{type:"text",...t("nombreMadre"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}):e.jsx("p",{className:"text-gray-900 bg-white px-3 py-2 rounded-md border",children:s?.nombreMadre||"No especificado"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre del Padre"}),a?e.jsx("input",{type:"text",...t("nombrePadre"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}):e.jsx("p",{className:"text-gray-900 bg-white px-3 py-2 rounded-md border",children:s?.nombrePadre||"No especificado"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"C√©dula de Identidad"}),a?e.jsx("input",{type:"text",...t("ci"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}):e.jsx("p",{className:"text-gray-900 bg-white px-3 py-2 rounded-md border",children:s?.ci||"No especificado"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tel√©fono M√≥vil"}),a?e.jsx("input",{type:"tel",...t("telefonoMovil"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}):e.jsx("p",{className:"text-gray-900 bg-white px-3 py-2 rounded-md border",children:s?.telefonoMovil||"No especificado"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tel√©fono Fijo"}),a?e.jsx("input",{type:"tel",...t("telefonoFijo"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}):e.jsx("p",{className:"text-gray-900 bg-white px-3 py-2 rounded-md border",children:s?.telefonoFijo||"No especificado"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Direcci√≥n de C√©dula"}),a?e.jsx("input",{type:"text",...t("direccionCI"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}):e.jsx("p",{className:"text-gray-900 bg-white px-3 py-2 rounded-md border",children:s?.direccionCI||"No especificado"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Direcci√≥n Actual"}),a?e.jsx("input",{type:"text",...t("direccionActual"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}):e.jsx("p",{className:"text-gray-900 bg-white px-3 py-2 rounded-md border",children:s?.direccionActual||"No especificado"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cuenta/Tarjeta de Pago"}),a?e.jsx("input",{type:"text",...t("cuentaTarjetaPago"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}):e.jsx("p",{className:"text-gray-900 bg-white px-3 py-2 rounded-md border",children:s?.cuentaTarjetaPago||"No especificado"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rol"}),e.jsx("p",{className:"text-gray-900 bg-white px-3 py-2 rounded-md border capitalize",children:s?.role==="admin"?"Administrador":"Usuario"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha de Registro"}),e.jsx("p",{className:"text-gray-900 bg-white px-3 py-2 rounded-md border",children:s?.createdAt?new Date(s.createdAt).toLocaleDateString("es-ES"):"N/A"})]})]})]}),a&&e.jsxs(l.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Cambiar Contrase√±a"}),e.jsx("button",{type:"button",onClick:()=>b(!x),className:"text-sm text-blue-600 hover:text-blue-800 transition-colors",children:x?"Cancelar":"Cambiar contrase√±a"})]}),x&&e.jsxs(l.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contrase√±a Actual"}),e.jsx("input",{type:"password",...t("currentPassword",{required:"Contrase√±a actual es requerida"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),c.currentPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.currentPassword.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nueva Contrase√±a"}),e.jsx("input",{type:"password",...t("newPassword",{required:"Nueva contrase√±a es requerida",minLength:{value:6,message:"M√≠nimo 6 caracteres"}}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),c.newPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.newPassword.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirmar Nueva Contrase√±a"}),e.jsx("input",{type:"password",...t("confirmPassword",{required:"Confirmaci√≥n es requerida",validate:n=>n===g("newPassword")||"Las contrase√±as no coinciden"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),c.confirmPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.confirmPassword.message})]})]})]}),a&&e.jsxs(l.div,{initial:{opacity:0},animate:{opacity:1},className:"flex space-x-4",children:[e.jsxs("button",{type:"submit",disabled:m.isPending,className:"flex items-center space-x-2 bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 transition-colors",children:[e.jsx(E,{className:"w-5 h-5"}),e.jsx("span",{children:m.isPending?"Guardando...":"Guardar Cambios"})]}),e.jsxs("button",{type:"button",onClick:()=>{d(!1),b(!1),u()},className:"flex items-center space-x-2 bg-gray-300 text-gray-700 px-6 py-2 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors",children:[e.jsx(F,{className:"w-5 h-5"}),e.jsx("span",{children:"Cancelar"})]})]})]}),m.isSuccess&&e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},className:"mt-6 bg-green-50 border border-green-200 rounded-md p-4",children:e.jsx("p",{className:"text-green-800",children:"Perfil actualizado exitosamente."})}),m.isError&&e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},className:"mt-6 bg-red-50 border border-red-200 rounded-md p-4",children:e.jsx("p",{className:"text-red-800",children:"Error al actualizar el perfil. Int√©ntalo de nuevo."})})]})]})})})};export{H as default};
